<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>CODEHUBT_ADMIN</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link th:href="@{/AdminStatic/css/style.css}" rel="stylesheet" />
    <link th:href="@{/AdminStatic/css/style1.css}" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
</head>
<body class="sb-nav-fixed">

<!-- Header -->
<div th:replace="~{AdminTemplates/layout/header :: header}"></div>

<div id="layoutSidenav">
    <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
            <div class="sb-sidenav-menu">

                <!-- Sidebar -->
                <div th:replace="~{AdminTemplates/layout/sidebar :: sidebar}"></div>
            </div>
            <div class="sb-sidenav-footer">
                <div class="small">Logged in as:</div>
                CODEHUBT
            </div>
        </nav>
    </div>

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">
                <h1 class="mt-4" > Qu·∫£n L√Ω Ng∆∞·ªùi D√πng  </h1>
                <ol class="breadcrumb mb-4">
                    <li class="breadcrumb-item active">C·∫¶N L·∫§Y ƒê∆Ø·ª¢C C√ÅC QUY·ªÄN v√† Tr·∫£ ra ƒë√¢y </li>
                </ol>
                <div class="container mt-5">
                    <div class="d-flex justify-content-between mb-3 ">
                        <h3>Table User</h3>
                        <button onclick="showAddFormOnly()" class="btn btn-primary">Create a user</button>
                    </div>
                    <hr/>
                    <div id="userList" style="display: block;" >
                        <table class="table table-bordered table-hover">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>UserName</th>
                                <th>Email</th>
                                <th>RoleName</th>
                            </tr>
                            </thead>
                            <tbody id="userTableBody">

                            </tbody>
                        </table>
                    </div>


                    <div id="userAddForm" style="display: none; margin-top: 20px;">
                        <h3>Th√™m ng∆∞·ªùi d√πng</h3>
                        <form id="addUserForm">
                            <label>T√™n T√†i Kho·∫£n :
                                <input type="text" name="userName" required pattern="[a-z0-9]+" title="Ch·ªâ vi·∫øt th∆∞·ªùng kh√¥ng d·∫•u, kh√¥ng kho·∫£ng tr·∫Øng">
                                <small class="hint">(Ch·ªâ d√πng ch·ªØ th∆∞·ªùng v√† s·ªë, kh√¥ng d·∫•u, kh√¥ng kho·∫£ng tr·∫Øng)</small>
                            </label>

                            <label>Email:
                                <input type="email" name="email" required>
                            </label>

                            <label>M·∫≠t kh·∫©u:
                                <div class="password-container">
                                    <input type="password" name="password" required>
                                    <button type="button" class="toggle-password">üëÅÔ∏è</button>
                                </div>
                            </label>

                            <label>H·ªç V√† T√™n :
                                <input type="text" name="fullName" required>
                            </label>

                            <label>Sinh Nh·∫≠t :
                                <input type="date" name="dateOfBirth">
                            </label>

                            <label>S·ªë ƒêi·ªán Tho·∫°i :
                                <input type="text" name="phoneNumber">
                            </label>

                            <label>ƒê·ªãa Ch·ªâ :
                                <input type="text" name="address">
                            </label>

                            <label>Quy·ªÅn:
                                <select name="roleName">
                                    <option value="ADMIN">ADMIN</option>
                                    <option value="STUDENT">STUDENT</option>
                                    <option value="TEACHER">TEACHER</option>
                                </select>
                            </label>

                            <div class="button-group">
                                <button type="button" onclick="showUserList()">ƒê√≥ng</button>
                                <button type="submit">Th√™m Ng∆∞·ªùi D√πng</button>
                            </div>
                        </form>
                    </div>

                    <!-- Form Chi ti·∫øt -->
                    <div id="userDetailForm" style="display: none; margin-top: 20px;">
                        <h3>Chi ti·∫øt ng∆∞·ªùi d√πng</h3>
                        <p>ID: <span id="detailUserId">1</span></p>
                        <p>T√™n: <span id="detailUserName">T√™n m·∫´u</span></p>
                        <p>Email: <span id="detailEmail">email@example.com</span></p>
                        <p>Quy·ªÅn: <span id="detailUserRole">ADMIN</span></p>
                        <button onclick="showUserList()">ƒê√≥ng</button>
                    </div>

                    <!-- Form S·ª≠a -->
                    <div id="userEditForm" style="display: none; margin-top: 20px;">
                        <h3>S·ª≠a ng∆∞·ªùi d√πng</h3>
                        <form id="editUserForm" name="editUserForm" enctype="multipart/form-data">
                            <input type="hidden" name="userId">
                            <input type="text" name="userName" placeholder="Username">
                            <input type="email" name="email" placeholder="Email">
                            <input type="text" name="fullName" placeholder="H·ªç t√™n ƒë·∫ßy ƒë·ªß">
                            <input type="date" name="dateOfBirth">
                            <input type="text" name="phoneNumber" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                            <input type="text" name="address" placeholder="ƒê·ªãa ch·ªâ">

                            <!-- File ·∫£nh -->
                            <label for="image">·∫¢nh ƒë·∫°i di·ªán:</label>
                            <input type="file" name="image" id="image">

                            <!-- Nhi·ªÅu quy·ªÅn -->
                            <div id="roleCheckboxes">
                                <!-- Checkboxes s·∫Ω ƒë∆∞·ª£c th√™m ·ªü ƒë√¢y b·∫±ng JS -->
                            </div>
                            <img id="preview" style="display:none; width:100px;" />
                            <button type="button" onclick="submitEditForm()">L∆∞u</button>
                            <button onclick="showUserList()">ƒê√≥ng</button>

                        </form>
                    </div>
                    <div class="pagination" id="pagination">
                        <!-- C√°c n√∫t ph√¢n trang s·∫Ω ƒë∆∞·ª£c t·∫°o ·ªü ƒë√¢y -->
                    </div>





                </div>


            </div>
        </main>

        <!-- Footer -->
        <div th:replace="~{AdminTemplates/layout/footer :: footer}"></div>
    </div>
</div>

<!-- ƒê·ªãnh nghƒ©a apiBaseUrl tr∆∞·ªõc khi g·ªçi login.js -->
<script th:inline="javascript">
    /*<![CDATA[*/
    var apiBaseUrl = /*[[${@environment.getProperty('api.base.url')}]]*/ "http://localhost:3000";
    /*]]>*/
</script>
<script th:src="@{/AdminStatic/js/User.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script th:src="@{/AdminStatic/js/scripts.js}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<!--<script th:src="@{/AdminStatic/js/chart-area-demo.js}"></script>-->
<!--<script th:src="@{/AdminStatic/js/chart-bar-demo.js}"></script>-->
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
<!--<script  th:src="@{/AdminStatic/js/datatables-simple-demo.js}"></script>-->
</body>
</html>
